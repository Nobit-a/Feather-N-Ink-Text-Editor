package editor;

import com.sun.glass.events.KeyEvent;
import java.awt.*;
import java.awt.datatransfer.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.awt.event.WindowAdapter;
import java.awt.font.TextAttribute;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.*;
import static java.util.Collections.list;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;
import static javax.swing.WindowConstants.*;
import javax.swing.text.BadLocationException;
import javax.swing.text.SimpleAttributeSet;
import javax.swing.text.Style;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;


public class Editor extends JPanel implements ActionListener {
    static JFrame f = new JFrame();
    JFrame FindReplace;
    static JMenuBar MenuBar = new JMenuBar();
    static JTextPane Text = new JTextPane();
    static JPanel Bottom = new JPanel();
    static String fName = "";
    static File file;
    static String fileText;
    static JScrollPane jp = new
    JScrollPane(Text,JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
    int initial = 0,init,len;
    static String sText = "";
    String input;
    static String FontName = "Arial";
    static int TextSize = 11;
    static String TextCase = "None";
    static String TextFormat = "None";
    static int emphasis = 0; //0 - no emphasis
                             //1 - bold
                             //2 - italics
                             //3 - underlined
    static StyledDocument doc = (StyledDocument)Text.getDocument();
    static int toBold = 0;
    static int toItalics = 0;
    static int toUnderline = 0;    
    
    Editor()
    {
        f.setIconImage(Toolkit.getDefaultToolkit().getImage(getClass().getResource("/Resources/FeatherNInk.jpg")));
        
        try 
        {
            UIManager.setLookAndFeel(
            UIManager.getSystemLookAndFeelClassName());
        } 
        catch (ClassNotFoundException ex) 
        {
            Logger.getLogger(Editor.class.getName()).log(Level.SEVERE,null, ex);
        } 
        catch (InstantiationException ex) 
        {
            Logger.getLogger(Editor.class.getName()).log(Level.SEVERE,null, ex);
        } 
        catch (IllegalAccessException ex) 
        {
            Logger.getLogger(Editor.class.getName()).log(Level.SEVERE,null, ex);
        } 
        catch (UnsupportedLookAndFeelException ex) 
        {
            Logger.getLogger(Editor.class.getName()).log(Level.SEVERE,null, ex);
        }
        Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
        StringSelection cText;

        f.setTitle("Untitled - Feather N' Ink Text Editor");

        //For Top Menu.
        Text.setEditable(false);
        JMenu File = new JMenu("File");
        JMenu Edit = new JMenu("Edit");
        JMenu Format = new JMenu("Format");
        JMenu Tools = new JMenu("Tools");
        JMenu Insert = new JMenu("Insert");

        JMenuItem New = new JMenuItem("New");
        JMenuItem Save = new JMenuItem("Save");
        JMenuItem Load = new JMenuItem("Load");

        JMenuItem Cut = new JMenuItem("Cut");
        JMenuItem Copy = new JMenuItem("Copy");
        JMenuItem Paste = new JMenuItem("Paste");
        JMenuItem Find = new JMenuItem("Find");

        JMenuItem Fontt = new JMenuItem("Font");
        
        JMenuItem WordCount = new JMenuItem("Word Count");
        
        JMenuItem InsertAShape = new JMenuItem("Insert a shape");

        File.add(New);
        File.add(Save);
        File.add(Load);

        Edit.add(Cut);
        Edit.add(Copy);
        Edit.add(Paste);
        Edit.add(Find);

        Format.add(Fontt);
        
        Tools.add(WordCount);

        Insert.add(InsertAShape);

        MenuBar.add(File);
        MenuBar.add(Edit);
        MenuBar.add(Format);
        MenuBar.add(Tools);
        MenuBar.add(Insert);


        Text.addMouseListener(new MouseListener()
        {
            @Override
            public void mouseClicked(MouseEvent e) {

            }

            @Override
            public void mousePressed(MouseEvent e) {

            }

            @Override
            public void mouseReleased(MouseEvent e) {
                if(Text.getSelectedText()!=null)
                {
                    sText = Text.getSelectedText();                    
                }
            }
            @Override
            public void mouseEntered(MouseEvent e) {

            }

            @Override
            public void mouseExited(MouseEvent e) {
                
            }
        });
        
        New.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                
                JFrame newFrame = new JFrame();
                JPanel p1 = new JPanel();
                JPanel p2 = new JPanel();
                JPanel p3 = new JPanel();

                newFrame.setSize(300,130);
                newFrame.setTitle("New File");
                
                p1.add(new JLabel("Enter File Name (with file extension"));
                JTextField newText = new JTextField(9);

                p2.add(newText);

                JButton okay = new JButton("Okay");
                okay.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        Text.setText("");
                        FontName = "Algerian";
                        TextSize = 11;
                        TextCase = "None";
                        TextFormat = "None";
                        
                        fName = newText.getText();
                        f.setTitle(fName);
                        try
                        {
                            CreateFile();
                            newFrame.dispose();
                        }
                        catch (IOException ex)
                        {
                            System.out.println("File not made.");
                        }
                    }
                });
                p3.add(okay);

                newFrame.add(p1,BorderLayout.NORTH);
                newFrame.add(p2,BorderLayout.CENTER);
                newFrame.add(p3,BorderLayout.SOUTH);
                newFrame.setLocationRelativeTo(null);
                newFrame.setResizable(false);
                newFrame.setIconImage(Toolkit.getDefaultToolkit().getImage(getClass().getResource("/Resources/FeatherNInk.jpg")));
                newFrame.setVisible(true);
            }
        });

        Save.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e) {
                BufferedWriter writer = null;
                String fileText = Text.getText();
                try {
                writer = new BufferedWriter(new FileWriter(file));
                writer.write(fileText);
                }
                catch (IOException ex) {
                    System.err.println(ex);
                }
                finally {
                    if (writer != null)
                    {
                        try {
                            writer.close();
                            }
                        catch (IOException ex) {
                            System.err.println(ex);
                            }
                    }
                }
        }});

        Load.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                JFrame loadFrame = new JFrame();
                JPanel p1 = new JPanel();
                JPanel p2 = new JPanel();
                JPanel p3 = new JPanel();

                loadFrame.setSize(300,130);
                loadFrame.setTitle("Load File");
                
                p1.add(new JLabel("Enter File Name (With file Extension)"));

                JTextField loadText = new JTextField(9);
                p2.add(loadText);

                JButton ok = new JButton("Okay");
                ok.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        fName = loadText.getText();
                        String fName2 = fName;
                        try{
                            OpenFile();
                            f.setTitle(fName2);
                            Text.setEditable(true);
                            loadFrame.dispose();
                        }
                        catch(IOException ex){
                            System.out.println("Can't Open File");
                        }
                    }

                });

                p3.add(ok);

                loadFrame.add(p1,BorderLayout.NORTH);
                loadFrame.add(p2,BorderLayout.CENTER);
                loadFrame.add(p3,BorderLayout.SOUTH);
                loadFrame.setResizable(false);
                loadFrame.setLocationRelativeTo(null);
                loadFrame.setIconImage(Toolkit.getDefaultToolkit().getImage(getClass().getResource("/Resources/FeatherNInk.jpg")));
                loadFrame.setVisible(true);
            }
        });

        Copy.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e) {
                if(Text.getSelectedText()!=null)
                {
                    sText = Text.getSelectedText();
                    StringSelection cText= new StringSelection(sText);
                    clipboard.setContents(cText, null);
                }
            }
        });

        Cut.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e) {
                if(Text.getSelectedText()!=null)
                {
                    sText = Text.getSelectedText();
                    StringSelection cText= new StringSelection(sText);
                    clipboard.setContents(cText, null);
                    Text.replaceSelection("");
                }
            }
        });

        Paste.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e) {
                Text.paste();
            }
        });

        Fontt.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                JFrame fontFrame = new JFrame();
                fontFrame.setTitle("Font");
                fontFrame.setLayout(new GridLayout(3,1));

                JPanel p1 = new JPanel();
                JPanel p2 = new JPanel();
                JPanel p3 = new JPanel();
                JPanel p5 = new JPanel();
                JPanel p6 = new JPanel();

                p1.setLayout(new GridLayout(2,1));  //Label font & Combobox font
                p2.setLayout(new GridLayout(2,1));  //Label size and ComboBox Size
                p3.setLayout(new GridLayout(2,1));  //Label Case and comboBox Case
                p5.setLayout(new GridLayout(2,1));  //Label Emphasis and p6
                                                    //p6 - three emphasis buttons
                fontFrame.setSize(300,230);

                String[] fonts = {"Agency FB", "Algerian", "Arial", "Arimo",
                    "Baskerville Old Face","Bell MT", "Broadway", "Calibri", "Cambria", "Candara", 
                    "Castellar", "Courier New", "DialogInput",
                    "DejaVu Sans","Garamond", "Georgia", "Helvetica","JokerMan", "Loose Script", "Lucida Handwriting",
                    "Monospaced", "Sans Serif","Serif", "Times New Roman"};
                
                JComboBox fontType = new JComboBox(fonts);

                fontType.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        FontName = (String)fontType.getSelectedItem();
                        try{
                            ChangeFont();
                        }
                        catch (BadLocationException ex)
                        {
                            Logger.getLogger(Editor.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                });
                p1.add(new JLabel("Font"));
                p1.add(fontType);

                JComboBox<Integer> size = new JComboBox<Integer>();
                for(int i = 10; i<=100; i = i+2)
                    size.addItem(i);

                size.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        TextSize = (Integer)size.getSelectedItem();
                        try
                        {
                            ChangeFont();
                        }
                        catch (BadLocationException ex) {
                            Logger.getLogger(Editor.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                });
                p2.add(new JLabel("Size"));
                p2.add(size);

                String[] cases = {"None", "lower case", "UPPER CASE", "tOGGLE cASE"};
                JComboBox caseOfText = new JComboBox(cases);

                caseOfText.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        TextCase = (String)caseOfText.getSelectedItem();
                        
                        try 
                        {
                            ChangeFont();
                        } 
                        catch (BadLocationException ex) 
                        {
                            Logger.getLogger(Editor.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                });
                
                JButton BoldButton = new JButton("B");
                JButton ItalicsButton = new JButton("I");
                JButton UnderlinedButton = new JButton("U");
                                
                Font boldButtonFont = new Font(BoldButton.getFont().getName(), Font.BOLD, BoldButton.getFont().getSize());
                Font italicsButtonFont = new Font(ItalicsButton.getFont().getName(), Font.ITALIC, ItalicsButton.getFont().getSize());
                
                BoldButton.setFont(boldButtonFont);
                ItalicsButton.setFont(italicsButtonFont);
                UnderlinedButton.setMnemonic(KeyEvent.VK_U);               
                
                BoldButton.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        emphasis = 1;
                        
                        if(toBold == 0)
                            toBold = 1;
                        else
                            toBold = 0;
                        
                        try 
                        {
                            ChangeFont(); 
                        } 
                        catch (BadLocationException ex) {
                            Logger.getLogger(Editor.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                });
                
                ItalicsButton.addActionListener(new ActionListener() 
                {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        emphasis = 2;
                        
                        if(toItalics == 0)
                           toItalics = 1;
                        else
                            toItalics = 0;
                        
                        try
                        {
                            ChangeFont(); 
                        } 
                        catch (BadLocationException ex)
                        {
                            Logger.getLogger(Editor.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                });
                                
                UnderlinedButton.addActionListener(new ActionListener() 
                {
                    @Override
                    public void actionPerformed(ActionEvent e) 
                    {
                        emphasis = 3;
                        
                        if(toUnderline == 0)
                           toUnderline = 1;
                        else
                            toUnderline = 0;
                        
                        try {
                            ChangeFont();
                        } 
                        catch (BadLocationException ex) {
                            Logger.getLogger(Editor.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                });
                
                p6.add(BoldButton);
                p6.add(ItalicsButton);
                p6.add(UnderlinedButton);
                
                p3.add(new JLabel("Case"));
                p3.add(caseOfText);
                                
                p5.add(new JLabel("Emphasis"));
                p5.add(p6);
                
                JButton okay = new JButton("Okay");
                okay.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        fontFrame.dispose();
                    }
                });
                
                JPanel top = new JPanel();
                JPanel middle = new JPanel();
                JPanel down = new JPanel();
                
                top.add(p1);
                top.add(p2);
                top.add(p3);
                
                middle.add(p5);
                
                down.add(okay);
                
                fontFrame.add(top);
                fontFrame.add(middle);
                fontFrame.add(down);
                fontFrame.setResizable(false);
                fontFrame.setLocationRelativeTo(null);
                fontFrame.setIconImage(Toolkit.getDefaultToolkit().getImage(getClass().getResource("/Resources/FeatherNInk.jpg")));
                fontFrame.setVisible(true);
            }
        });

        Find.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e) {
                FindReplace = new JFrame();
                JPanel j1= new JPanel();
                JPanel j2  = new JPanel();
                JPanel j3  = new JPanel();
                JPanel j4  = new JPanel();

                JLabel Find = new JLabel("Find What");
                JTextField SearchBar = new JTextField();
                SearchBar.setColumns(13);
                JButton Next = new JButton("Next");

                JLabel ReplaceWith = new JLabel("Replace With");
                JTextField ReplaceBar = new JTextField();
                ReplaceBar.setColumns(13);
                JButton ReplaceNext = new JButton("Replace Next");
                JButton ReplaceAll = new JButton("Replace All");


                Next.addActionListener(new ActionListener()
                {
                    @Override
                    public void actionPerformed(ActionEvent e) {

                }});

                Next.addActionListener(new ActionListener()
                {
                    @Override
                    public void actionPerformed(ActionEvent e)
                    {
                        String total = Text.getText();
                        input = SearchBar.getText();
                        len = input.length();
                        initial = total.indexOf(input, initial);
                        if(total.contains(input))
                        {
                            if(initial==0)
                            Text.select(initial, initial+len+1);
                            else
                            Text.select(initial, initial+len);

                            initial = initial+len;
                        }
                    }
                });

                ReplaceNext.addActionListener(new ActionListener()
                {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        String total = Text.getText();
                        input = SearchBar.getText();
                        len = input.length();

                        if(total.contains(input))
                        {
                            initial = total.indexOf(input, initial);
                            String re = ReplaceBar.getText();
                            if(initial==0)
                            Text.select(initial, initial+len+1);
                            else
                            Text.select(initial, initial+len);
                            Text.replaceSelection(re);
                            initial = initial+len;
                        }
                    }
                });

                ReplaceAll.addActionListener(new ActionListener()
                {
                    @Override
                    public void actionPerformed(ActionEvent e) 
                    {
                        String total = Text.getText();
                        input = SearchBar.getText();
                        total = total.replace(input, ReplaceBar.getText());
                        Text.setText(total);
                    }
                });
            
                j1.add(Find);
                j1.add(SearchBar);
                j1.add(Next);

                j2.add(ReplaceWith);
                j2.add(ReplaceBar);
                j2.add(ReplaceNext);
                j3.add(ReplaceAll);

                FindReplace.setLayout(new FlowLayout());
                FindReplace.add(j1);
                FindReplace.add(j2);
                FindReplace.add(j3);
                FindReplace.setSize(680,125);
                FindReplace.setLocationRelativeTo(null);
                FindReplace.setResizable(false);
                FindReplace.setIconImage(Toolkit.getDefaultToolkit().getImage(getClass().getResource("/Resources/FeatherNInk.jpg")));
                FindReplace.setVisible(true);
                FindReplace.setDefaultCloseOperation(DISPOSE_ON_CLOSE);
            }});
        
        WordCount.addActionListener(new ActionListener() 
        {
            @Override
            public void actionPerformed(ActionEvent e) {
                JFrame WordFrame = new JFrame();
                WordFrame.setTitle("Word Count");
                WordFrame.setSize(300, 130);
              
                String[] wordsInSelectedText = sText.split(" |\\\n");

                int NoOfSelectedWords = 0;                                  
                for(int i = 0; i < wordsInSelectedText.length; i++)        //Number of Words selected
                {
                    if(wordsInSelectedText[i].length() != 0)
                        NoOfSelectedWords++;
                }

                String textword = Text.getText();
                String[] wordsInText = Text.getText().split(" |\\\n");

                int NoOfWords = 0;                                  
                for(int i = 0; i < wordsInText.length; i++)        //Number of Words
                {
                    if(wordsInText[i].length() != 0)
                        NoOfWords++;
                }
                
                int characters = textword.length();     //Number of characters, with spaces

                String[] CharWoSpace = textword.split(" ");     //Number of characters, without space
                int NumCharWoSpace = 0;
                for(int i = 0; i < CharWoSpace.length; i++)
                {
                    NumCharWoSpace = NumCharWoSpace + CharWoSpace[i].length();
                }
                
                String sw = "Selected Words: ";
                sw = sw + NoOfSelectedWords;
                
                String w = "Words: \t";
                w = w + NoOfWords;

                String CharSpace = "Characters (with Spaces): ";
                CharSpace = CharSpace + characters;

                String CharWithoutSpace = "Characters (without Spaces): ";
                CharWithoutSpace = CharWithoutSpace + NumCharWoSpace;

                JLabel selectedWords = new JLabel(sw);
                JLabel words = new JLabel(w);
                JLabel charactersW = new JLabel(CharSpace);
                JLabel charactersWO = new JLabel(CharWithoutSpace);

                JButton okay = new JButton("Okay");
                okay.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        WordFrame.dispose();
                    }
                });
                WordFrame.setLayout(new GridLayout(5,1));

                WordFrame.add(selectedWords);
                WordFrame.add(words);
                WordFrame.add(charactersW);
                WordFrame.add(charactersWO);
                WordFrame.add(okay);

                WordFrame.setLocationRelativeTo(null);
                WordFrame.setResizable(false);
                WordFrame.setIconImage(Toolkit.getDefaultToolkit().getImage(getClass().getResource("/Resources/FeatherNInk.jpg")));
                WordFrame.setVisible(true);
                WordFrame.setDefaultCloseOperation(DISPOSE_ON_CLOSE);
            }
            });

        InsertAShape.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e) 
            {
                Paintt p = new Paintt();
            }
        });
    }
    
        
    
    public static void ChangeFont() throws BadLocationException
    {
        String caseString = "";
        int init = Text.getCaretPosition()-sText.length();
        doc.remove(init, sText.length());
        
        SimpleAttributeSet normal = new SimpleAttributeSet(); 
        StyleConstants.setFontFamily(normal,FontName);
        StyleConstants.setFontSize(normal, TextSize);
        
        if(TextCase.equalsIgnoreCase("lower case"))
        {
            caseString = sText.toLowerCase();
        }
        else if(TextCase.equalsIgnoreCase("UPPER CASE"))
        {
            caseString = sText.toUpperCase();
        }
        else if(TextCase.equalsIgnoreCase("tOGGLE cASE"))
        {
            int i;
            char c;
            for(i = 0; i<sText.length();i++ )
            {
                c = sText.charAt(i);
                if(Character.isUpperCase(c))
                {
                    c = Character.toLowerCase(c);
                }
                else if(Character.isLowerCase(c))
                {
                    c = Character.toUpperCase(c);
                }
                caseString = caseString + c;
            }
        }
        else if(TextCase.equalsIgnoreCase("None"))
        {
            caseString = sText;
        }
        
        if(emphasis == 0)
        {
            doc.insertString(init, caseString, normal);
        }
        else if(emphasis == 1)
        {
            SimpleAttributeSet bold = new SimpleAttributeSet(normal);
            if(toBold == 1)
            {
                StyleConstants.setBold(bold, true);
                doc.insertString(init, caseString, bold);
            }
            else
            {
                doc.insertString(init, caseString, normal);
            }
        }
        else if(emphasis == 2)
        {
            SimpleAttributeSet itaics = new SimpleAttributeSet(normal);
            if(toItalics == 1)
            {
                StyleConstants.setItalic(itaics, true);
                doc.insertString(init, caseString, itaics);
            }
            else
            {
                doc.insertString(init, caseString, normal);
            }
        }
        else if(emphasis == 3)
        {
            SimpleAttributeSet underline = new SimpleAttributeSet(normal);
            if(toUnderline == 1)
            {
                StyleConstants.setUnderline(underline, true);
                doc.insertString(init, caseString, underline);
            }
            else
            {
                doc.insertString(init, caseString, normal);
            }
        }
    }

    public static void CreateFile() throws IOException
    {
        new File("C://Text Editor").mkdirs();
        String Name = "C://Text Editor//" + fName;
        file = new File(Name);
        if(file.createNewFile())
        {
            System.out.println("File Created");
            Text.setEditable(true);
        }
    }
    
    public static void OpenFile() throws IOException
    {
        String Name = "C://Text Editor//" + fName;
        //file is saved in C drive, in a new folder called text editor
        file = new File(Name);
        Scanner input = new Scanner(file);
        String s = "";
        while(input.hasNext())
        {
            s = s + input.nextLine() + "\n";
        }
        Text.setText(s);
    }

    public static void main(String[] args) {
        Editor main = new Editor();

        f.setLayout(new BorderLayout());
        f.setJMenuBar(MenuBar);
        f.getContentPane().add(jp);
        f.add(jp,BorderLayout.CENTER);
        f.add(Bottom,BorderLayout.SOUTH);

        f.setSize(800,600);
        f.setLocationRelativeTo(null);
        f.setVisible(true);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    @Override
    public void actionPerformed(ActionEvent e) {
        throw new UnsupportedOperationException("Not supported yet.");
    }
}

class Paintt extends Canvas implements MouseListener,MouseMotionListener
{
    int x,y,width,height,posrecx,posrecy,choice;
    Point pTop,pBottom,pLeft,pRight,tt,tl,tr,lp,rp;
    boolean dragged = false;
    public void paint(Graphics g)
    {
        super.paint(g);

        if(choice==1)
        {
            setBackground(Color.ORANGE);
            g.drawLine(x, y, x+width, y+height);
        }

        else if(choice==2)
        {
            setBackground(new Color(255,69,0));
            g.drawOval(x, y, width, height);
        }

        else if(choice==3)
        {
            setBackground(new Color(127,255,0));

            int[] xc = {x,x-(width/2), x+(width/2)};
            int[] yc = {y,y+(height), y+(height)};
            g.drawPolygon(xc,yc,3);
        }

        else if(choice==4)
        {
            setBackground(new Color(30,144,255));
            g.drawRect(x, y, width, height);
        }

        else if(choice==5)
        {
            setBackground(Color.GRAY);
            g.drawRoundRect(x, y, width, height, width/10, height/10);
        }

        if(choice!=3 && choice!=1)
        {
        posrecx=x+width/2 -4;
        posrecy=y-3;

        pTop = new Point(posrecx,posrecy);
        pBottom = new Point(posrecx,posrecy+height);
        pLeft = new Point(posrecx-width/2, posrecy+height/2);
        pRight = new Point(posrecx+width/2, posrecy+height/2);


        g.fillRect(pTop.x, pTop.y, 8, 8);
        g.fillRect(pBottom.x, pBottom.y, 8, 8);
        g.fillRect(pLeft.x, pLeft.y, 8, 8);
        g.fillRect(pRight.x, pRight.y, 8, 8);
        }
        
        else if(choice==3)
        {
            tt = new Point(x-4, y-4);
            tl = new Point(x-(width/2)-4, y+height-4);
            tr = new Point(x+(width/2)-4, y+height-4);

            g.fillRect(tt.x,tt.y,8, 8);
            g.fillRect(tl.x,tl.y, 8, 8);
            g.fillRect(tr.x,tr.y, 8, 8);
        }
        
        else if(choice==1)
        {
            lp = new Point(x,y);
            rp = new Point(x+width,y+height);
            g.fillRect(x-4, y-4, 8, 8);
            g.fillRect(x-4+width, y-4+height, 8, 8);
        }
    }

    public Paintt()
    {
        x=290;
        y=200;
        width=100;
        height=100;
        dragged = false;
        choice=1;

        JFrame Shape = new JFrame("Shape Chooser");
        Shape.setSize(680,580);

        JPanel shapeChooser = new JPanel();
        shapeChooser.setBounds(0,25,680,30);
        JButton Circ = new JButton("Circle");
        JButton Rect = new JButton("Rectangle");
        JButton RoundRect = new JButton("Round Rectangle");
        JButton Line = new JButton("Line");
        JButton Tri = new JButton("Triangle");

        shapeChooser.setLayout(new GridLayout(1,5));
        shapeChooser.add(Line);
        shapeChooser.add(Circ);
        shapeChooser.add(Tri);
        shapeChooser.add(Rect);
        shapeChooser.add(RoundRect);

        Line.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e) {
                choice = 1;
                x=290;
                y=200;
                width=100;
                height=100;
                repaint();
            }
        });

        Circ.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e) {
                choice = 2;
                x=290;
                y=200;
                width=100;
                height=100;
                repaint();
            }
        });

        Tri.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e) {
                choice = 3;
                x=330;
                y=180;
                width=200;
                height=140;
                repaint();
            }
        });

        Rect.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e) {
                choice = 4;
                x=290;
                y=200;
                width=100;
                height=100;
                repaint();
            }
        });

        RoundRect.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e) {
                choice = 5;
                x=290;
                y=200;
                width=100;
                height=100;
                repaint();
            }
        });

        addMouseListener(this);
        addMouseMotionListener(this);

        Shape.add(shapeChooser,BorderLayout.NORTH);
        Shape.setResizable(false);
        Shape.setLocationRelativeTo(null);
        Shape.setIconImage(Toolkit.getDefaultToolkit().getImage(getClass().getResource("/Resources/FeatherNInk.jpg")));
        Shape.setVisible(true);
        Shape.add(this);
    }
                    
    @Override
    public void mouseClicked(MouseEvent e) {
    }

    @Override
    public void mousePressed(MouseEvent e) {
        dragged = true;
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        dragged = false;
    }
    
    @Override
    public void mouseEntered(MouseEvent e) {
    }

    @Override
    public void mouseExited(MouseEvent e) {
    }

    @Override
    public void mouseDragged(MouseEvent e) {

        if(dragged)
        {
            Point newp = new Point(e.getPoint().x,e.getPoint().y);

            if(choice==1)
            {
                if((Math.abs(lp.x-newp.x)<=8) && (Math.abs(newp.y-lp.y)<=8))
                {
                    y=newp.y;
                    x=newp.x;
                    width =(rp.x-newp.x);
                    height = (rp.y-newp.y);
                    repaint();
                }
                else if((Math.abs(rp.x-newp.x)<=8) && (Math.abs(newp.y-rp.y)<=8))
                {
                    width =(newp.x-lp.x);
                    height =(newp.y-lp.y);
                    repaint();
                }
            }
            
            else if(choice==3)
            {
                if((Math.abs(tt.x-newp.x)<=8) && (Math.abs(newp.y-tt.y)<=8))
                {
                    if(newp.y<y)
                    {
                        height=height+Math.abs(newp.y-y);
                        y=newp.y;
                    }
                    else if(newp.y>y)
                    {
                        height=height-Math.abs(newp.y-y);
                        y=newp.y;
                    }
                repaint();
                }

                else if((Math.abs(tl.x-newp.x)<=8) && (Math.abs(newp.y-tl.y)<=8))
                {
                    if(newp.x<(x-width/2))
                    {
                        width=Math.abs(newp.x-tr.x);
                    }
                    else if(newp.x>(x-width/2))
                    {
                        width=Math.abs(newp.x-tr.x);
                    }
                    repaint();
                }

                else if((Math.abs(tr.x-newp.x)<=8) && (Math.abs(newp.y-tr.y)<=8))
                {
                    if(newp.x>(x+width/2))
                    {
                        width=Math.abs(newp.x-tl.x);
                    }
                    else if(newp.x<(x+width/2))
                    {
                        width=Math.abs(newp.x-tl.x);
                    }
                    repaint();
                }
            }
            
            else
            {
                if((Math.abs(pTop.x-newp.x)<=8) && (Math.abs(newp.y-pTop.y)<=8))
                {
                    if(newp.y<y)
                    {
                        height = height + Math.abs(newp.y-y);
                        y=newp.y;
                    }
                    else if(newp.y>y)
                    {
                        height = height - Math.abs(newp.y-y);
                        y=newp.y;
                    }
                    repaint();
                }
                
                else if(Math.abs(pBottom.x-newp.x)<=8 && Math.abs(newp.y-pBottom.y)<=8)
                {
                    if(newp.y>(y+height))
                    {
                        height = Math.abs(newp.y-y);
                    }
                    else if(newp.y<(y+height))
                    {
                        height = Math.abs(newp.y-y);
                    }
                    repaint();
                }
                
                else if(Math.abs(pLeft.x-newp.x)<=8 && Math.abs(newp.y-pLeft.y)<=8)
                {
                    if(newp.x<x)
                    {
                        width = width + Math.abs(newp.x-x);
                        x=newp.x;

                    }
                    else if(newp.x>x)
                    {
                        width = width - Math.abs(newp.x-x);
                        x=newp.x;
                    }
                    repaint();
                }
                
                else if(Math.abs(pRight.x-newp.x)<=8 && Math.abs(newp.y-pRight.y)<=8)
                {
                    if(newp.x>(x+width))
                    {
                        width = Math.abs(newp.x-x);
                    }
                    else if(newp.x<(x+width))
                    {
                        width = Math.abs(newp.x-x);
                    }
                    repaint();
                }
            }
        }
    }

    @Override
    public void mouseMoved(MouseEvent e) {
    }
}
